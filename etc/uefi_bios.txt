UEFI vs BIOS 과 Windows 10 설치 이해하기

태초에 컴 구동 시키는 프로그램은 하나였는데, 또 하나 늘었다
BIOS라고 불리는 프로그램이 그것인데, 이 녀석은 초기에 구동되는 절대적 프로그램인 동시에 
일반명사화 되어 버린 프로그램이었다.
신과 같은 녀석인데, 신2라는 녀석이 생겼다..그 녀석이 UEFI 

	BIOS : 컴 시작시 초기화 구형 시스템
	UEFI : 컴 시작시 초기화 신형 시스템 (새로 생겼다)

	요즘 보드는 기본 시작이 UEFI 시스템이다
	(화려한 그래픽을 자랑하면 대부분 UEFI)

	앞으로 두 녀석을 '초기화 시스템' 이라 부르겠다.

이해를 위한 기본 용어정리 

	BIOS :	보드 BIOS 칩에 내장된 BIOS 펌웨어를 말한다. 
		비휘발성 내장 소프트웨어. 
	CMOS : 
		BOIS에서 설정한 값들이 저장되는 칩메모리. 
		휘발성 설정값 저장 파일 or 데이터베이스(?)라고 생각하면 됨. 
		CMOS 배터리로 값을 유지한다(보드에서 이 배터리를 제거하면 자동 초기화 된다)
		
		'BIOS 에서 CMOS 값을 바꿔!' 가 맞는 표현일 것이다.

	UEFI :	기존 BIOS 한계를 극복하는 펌웨어 인터페이스(소프트웨어 + 시스템)
	
	MBR 파티션 : 
		하드디스크 파티션 형식 중 하나
		주파티션 최대 4개, 더 확장하려면 1개는 논리파티션으로 만들고 더 나눌 수 있다
		최대 2TB 를 넘을 수 없다
		32 bit,  64bit 지원

	GPT 파티션 : 
		하드디스크 파티션 형식 중 하나
		주파티션 , 논리파티션 개념이 없고 최대 128개의 파티션 가능.
		최대 8ZB 사용 가능
		64 bit만 지원

BIOS 와 UEFI 차이비교
	
	BIOS :  
		텍스트 기반 설정 UI
		소프트웨어 용량이 작아서 불편한 셋팅 환경(키보드만 쓸 수 있는 등)
		부팅 디스크 인식 : MBR 파티션 시스템 인식			
		새로운 초기화 시스템인 UEFI가 나와서 legacy라는 명칭으로 불리게 된다
		
	UEFI :  
		그래픽기반 설정 UI
		소프트웨어 용량이 크고 BIOS 소프트웨어보다 그래픽이 화려하고 마우스도 지원한다.
		secure boot 를 이용하여 디지털 서명이 확인되지 않은 드라이버버 or 장치 로더의 로드를 막을 수 있다
		부팅시 디스크 인식 : GPT 파티션 시스템 인식
			(근데 이 UEFI는 자신과 맞지 않는 MBR 파티션도 인식할 수 있게 하기 위해 
			UEFI 를  Lagacy(BIOS) 로 셋팅하는 모드가 있다
			요게 앞으로 다룰 문제의 시발점이 된다)

BIOS vs UEFI 그래서 뭔 차이가 있나?

	초기화 소프트웨어 성능과, 부팅절차와 부팅시 인식할 수 있는 파티션 시스템이 다르다.(한마디로 새판, 새로운 대륙)
	부팅절차와 인식 가능 파티션 구조가 달라서 얻는 이점 중 대표적인 점은 
	부팅이 빨라지고, 대용량 파티션를 사용할 수 있다 등이 있을 것이다.

--------------------------------------- 윈도우10 설치 못하는 경우의 수 이야기

BIOS 와 UEFI 방식의 차이 때문에 운영체제 설치시(윈도우 10이상) 여러가지 문제에 부딪힌다
예전에 BIOS 방식일때는 생각할 필요도 없던 문제가 생기는데 아래와 같다

요즘 OS는 USB 메모리에 담아서 설치한다.
그러면 USB 메모리도 하드디스크와 같은 방식이라고 볼때 
BIOS 또는 UEFI 시스템의 각자 다른 파티션 인식 문제가 생기고, 
여기서 궁합이 맞지 않으면 부팅 자체를 못하게 된다.

	BIOS 시스템 => 부팅시 MBR 파티션 만 인식
	UEFI 시스템 => 부팅시 GPT 파티션 만 인식

USB 부팅 설치 파티션를 만들때 설치할 컴 시스템을 알아보고 만들어야 하는데, 
대부분 대충 만들어서 문제가 발생한다. 
또 다른 경우는 이미 가지고 있는 부팅 설치 USB가 설치할 컴과 맞지 않는 궁합 일 수도 있다.

궁합 예를 들어보자

	BIOS + USB(MBR파티션 + FAT32 + 윈도우 10) :
		부팅시 BIOS 시스템이 MBR 파티션으로 된 USB 를 읽을 수 있다. 부팅이 된다

	BIOS + USB(GPT파티션 + FAT32 + 윈도우 10) :
		부팅시 BIOS 시스템이 GPT 파티션으로 된 USB 를 읽을 수 없다. 부팅이 안된다
	
	UEFI + USB(MBR파티션 + FAT32 + 윈도우 10) :
		부팅시 UEFI 시스템이 MBR 파티션으로 된 USB 를 읽을 수 없다. 부팅이 안된다
		(대신 UEFI 모드에서 legacy(BIOS 모드)로 설정을 바꾸면 부팅할 수 있다.)

	UEFI + USB(GPT파티션 + FAT32 + 윈도우 10) :
		부팅시 UEFI 시스템이 GPT 파티션으로 된 USB 를 읽을 수 있다. 빠른 부팅이 된다

위에서 표현한 파일시스템은(FAT32 또는 NTFS)는 중요 사항이 아니다.

	--------------------------------- 단일 파일 시스템에 대해
	유저들이 보안등을 추가한 윈도우 설치 .iso를 만들었다면 4GB가 넘어가게 된다.
	왜 4GB 를 기준 삼냐면, FAT32 는 단일 파일이 4GB가 넘으면 안된다.
	NTFS로 하게되면 단일 파일이 4GB가 넘어가도 인식한다.
	만일 4GB가 넘는 windows10.iso 파일을 USB등의 저장장치로 복사 및 이동시 이 제한 때문에 작동 불가 할 것이다.

	또 한가지 
	FAT32 는 32GB 까지 인식. 
	자신이 가지고 있는 USB가 64GB라면 32GB만 쓸 수 있고 나머지 못 씀
	
	설치디스크를 만드는게 아니고 단일 파일만 이동&복사할때 이런 내용을 알고 있어어야 한다.
	.iso 파일만 걍 복사해서  USB 메모리로 이동&복사할 경우 용량이 4GB가 넘어가면 NTFS로 해야 담을 수 있을 뿐이다.
	---------------------------------

다시 반복해 보면 

	BIOS => 부팅시 MBR 파티션 만 인식 
	UEFI => 부팅시 GPT 파티션 만 인식

	BIOS 시스템 방식 보드에서 USB(Windows 10) 부팅파티션를 만들려면 인식할 수 있는 MBR 파티션으로 만들어야 된다.
	UEFI 시스템 방식 보드에서 USB(Windows 10) 부팅파티션를 만들려면 인식할 수 있는 GPT 파티션으로 만들어야 된다.

그러데 UEFI는 나중에 나온 더 좋은 시스템이므로 
Lagacy(BIOS 시스템)으로 다운그레이드가 가능하고 
변경하면 부팅시, 
MBR 파티션도 인식 시킬 수 있다.
다운그레이드 옵션을 설정해서 설치 후 다시 UEFI 시스템으로 돌아간다면? 
부팅이 안되겠지...부팅시 인식 못하는 파티션 시스템일테니..
(이게 문제가 발생하는 핵심)

많이 부딪히는 문제로 설치할 컴이 UEFI 시스템이고 기본설정인데(최신 사양 노트북이나 컴) ,
가지고 있는 USB 부팅파티션이 MBR파티션로 만들어졌을 경우에  인식 시키기 위해 ,
UEFI 모드에서 Lagacy(BIOS) 시스템으로 다운그레이드 변경했다고 가정하자.
(신형에서 구형으로.. 왜냐면 USB 파티션이 구형이므로)


일단 특정한 컴 설정 예를 살펴보면(삼성 노트북등이 이렇게 되어 있다고 한다) ,  

DEL, F2키를 눌러 UEFI 모드로 들어간다
여기서 MBR 파티션을 읽을 수 있는 Lagacy(BIOS) 모드를 설정해야하는데, 또 새로운 용어가 나온다.
	
	- Lagacy : 위에서 지정했듯이 옛날 구형(BIOS) 시스템을 이르는 단어.
	- secure boot : UEFI에서 쓰는 보안 기능.
	- CSM : UEFI바이오스상에서 Legacy모드를 지원해주는 호환성 지원 모듈 약자.(Lagacy와 같다)
	- Fast Boot, Ultra Fast Boot : UEFI와 관련된 기능일 것이다. 부팅속도와 관련 있을 것같다.

제조사마다 다른 용어일테지만, 대략 비슷할 것이다. 
(개념을 이해했다면 나머진 메뉴얼 찾아보면 된다.)


secure boot 라는 메뉴를 보자
이건 UEFI에만 있는 모드이고 보안에 관한 설정같은데, 요녀석을 비활성화 시켜주면, OS Mode 카테고리가 활성화되고,
	-CSM OS
	-UEFI OS
	-CSM and UEFI OS

카테고리 중 구형을 의미하는 CSM OS, 또는 CSM and UEFI OS를 선택하면, 
구형 Lagacy(BIOS) 모드로 컴 초기화 시스템이 다운그레이드 되는 거같다.(아님 지원되는 것인지는 모름)
이렇게 설정 후 다시 재기동 하면, MBR 파티션으로 된 USB 부팅파티션를 인식한다.

(Fast Boot, Ultra Fast Boot 등의 설정이 혹시 있다면 
아마도 부팅 GPT 파티션로 설정되었을 경우  더 빠른 시동을 위한 설정일 것이다.[추가! 이거 하지마라! 나중에 키보드로 UEFI 시스템 못 들어간다])

(위 설명은 특정 보드의 예제 일뿐이다, 컴마다 용어와 설정 형식이 다르지만, 큰 틀은 비슷하다)


조합의 예제는 많을 것이다. 딱 부러지는 답을 못 내리는게 조합이 많아서다..
하지만, 개념을 이해하면 풀리는 문제이다.

자, 또 다른 면의 파티션 형식 공부를 해보자 
윈도우 10 설치할때 파티션을 설정하게 된다.

각 '초기화 시스템'으로 부팅시 서로 부팅시 지원하는 파티션 형식대로, 

		BIOS => 부팅시 MBR 파티션 만 인식 => 기본 MBR 파티션으로 설치됨.
		UEFI => 부팅시 GPT 파티션 만 인식 => 기본 GPT 파티션으로 설치됨.

특별히 내가 원하는 파티션으로 설치를 원할 경우 도스 모드에서 diskpart 명령어를 써서 바꿔야 한다
암튼 궁합 잘맞는 파티션인 기본으로 설치할 경우 , 
각 '초기화 시스템'별 파티션 작업을 하게 되면 아래와 같이 구조가 잡히게 된다.
1개의 파티션으로 설정했다고 가정 하면, 

	설치 전 : 
		BIOS : 	1.시스템 예약(1개로 합칠 수도 있음)
			2.OS 설치할 파티션 
			
				
		UEFI : 기본 4개의 파티션이 설정된다.(변경 못함)
			1.복구
			2.시스템
			3.MSR(예약)
			4.OS 설치할 파티션


	설치 후
		BIOS : 	1.시스템 예약(1개로 합칠 수도 있음)
			2.OS 설치할 파티션 
				
		UEFI : 기본 3개의 파티션으로 변화함
			1.복구
			2.EFI 시스템 (**중요 여기에 부트로더 프로그램이 있게 된다)
			3.OS 설치한 파티션
		
이런 식으로 구조자체가 다르게 된다..
특히 UEFI 시스템은 EFI 시스템 이라는 파티션을 별도로 생성하고 
저 파티션에 있는 부트로드라는 프로그램이 부팅을 전담하는 구조로, 
기존 Lagacy(BIOS) 의 부팅 절차와 다르고, 매우 빠른 부팅 속도를 체감하게 되는 이유가 된다고 한다.

BIOS 시스템에서는 파티션 볼륨 확장등을 이용하면 씰데 없는(?) (시스템예약, 복구) 파티션등을 하나로 합칠 수도 있지만 ,
UEFI 시스템에서는 수동으로 합칠 수가 없다 (예약된 변경 못하는 파티션). 
당연한게  EFI 시스템 파티션은 UEFI시스템이 구동 되기 위한 꼭 필요한 파티션이므로 없다면 부팅할 수 없다
(복구 파티션은 합쳐도 될 것같기도 하지만... 이유가 있겠지..)

복잡한 듯 보이지만, 한번 이해하면 이게 왜 안 되고 저건 되는지를 이해하게 된다..
경우에 수가 많이 나오는 조합인데 인터넷 블로그등에는 이런 내용을 설명하는 게 아니고
자신이 성공한 1가지 방법만을 설명하기 때문에 헷갈리고 다양한 방법이 있는 것처럼 보이게 된다.

궁합을 잘 이해하자
	
	BIOS 시스템 => 부팅시 MBR 파티션 만 인식
	UEFI 시스템 => 부팅시 GPT 파티션 만 인식

설치할 '초기화 시스템'이 뭔지 파악하고 
설치 USB를 만들때 '초기화 시스템' 맞는 파티션을 적용해서 만들면 문제가 없게 된다.

다시 반복!

최신식 보드이고 최신의 방식으로 설치한다면 

	UEFI 시스템으로 부팅되므로   
	USB(설치할 수 있는  부팅디스크로 제작되어있고,GPT 파티션으로 만들어야함)
	설치할 SSD 또는 하드디스크도 GPT 파티션으로 설치함.

이렇게 설치하면 부팅이 겁나게 빠르게 된 것을 느낄 것이다.

자기 컴 시스템이 UEFI인데 , 설치 USB를 만들때 MBR 파티션으로 만들어서 문제가 되는 것이다.
결국 인식 시키기 위해서 UEFI 를 Lagacy(BIOS)로 변경해야 하고,
설치될 SSD 또는 하드디스크에도 (도스로 변경 안했다면) MBR파티션으로 설치 될거다..
그리고 바꾼 Lagacy(BIOS) 모드를 UEFI로 돌렸다면?

	ㅋㅋ 당연히 부팅이 안되지...

걍 구식 초기화 설정으(BIOS)로 계속 사용해야 하는 것이다. 
부팅 속도는 당연히 느릴 것이고, 
2TB이상 하드디스크는 2TB까지만 잡고 나머지는 못 쓰게 된다.

---------------------------------------요약

UEFI 시스템의 윈도우 10 설치 절차는 크게 다음과 같다

	1. 윈도우 10 USB 설치 파티션 만들기
		- UEFI 시스템이니 당연히 GPT파티션으로 만들어야 인식된다.

	2. SSD or 하드디스크에 운영체제 설치시 기본 GPT 파티션으로 설치됨.
	
UEFI 시스템인데, 가지고 있는 USB 설치 파티션이 MBR파티션이다.
USB 운영체제 설치 파티션를 GPT파티션으로 만들어서 다시 제작하면 되지만, 그럴 시간이 없다면..
그럴때 UEFI시스템을 Lagacy(BIOS) 시스템모드로 다운그레이드하고 USB를 인식시켜 설치.
한번 바꾼 Lagacy(BIOS) 시스템은 그대로 두고 걍 써야 한다.(설치될때 파티션 변경을 안했다면 기본 궁합으로 설치되므로)

다른 관점의 다양한 문서, 유투브 등을 참고 해서 이 글을 작성했다..

이 정도면 현시점 저 문제에 부딪혀서 설치 블로그등에 헤메일 필요가 없을 거라 생각한다.
	
	해결 핵심키워드: 

	BIOS 시스템 => 부팅시 MBR 파티션 만 인식 => 설치시 MBR 파티션으로 설치됨(기본,설치시 변경가능[도스명령어 써야함])
	UEFI 시스템 => 부팅시 GPT 파티션 만 인식 => 설치시 GPT 파티션으로 설치됨(기본,설치시 변경가능[도스명령어 써야함])

---------------------------------------etc
1. windows 10 설치 USB 만들기

	Refus 프로그램 : 
		windows 10 설치 파일을 .iso 형식으로 받았을 경우 usb로 설치 부팅 복사 시켜주는 대표적인 프로그램.
	
	설치 옵션 : 
		부트 선택 : iso 파일 선택
		파티션 방식 : MBR , GPT 등
		포맷 옵션 : FAT32 , NTFS 등

	위 설정등이 뭔지 이제 이해가 갈 것이다.
	
	설치한 컴 '초기화 시스템' 을 파악하고 거기에 파티션 옵션을 설정해서 usb 설치 부팅 디스크를 제작하면 된다.

2. 부팅 디스크를 다 사용 후 이전 상태로 복구하려면?

	GPT디스크 설치USB 만든 후 원치 않는 파티션(uefi파티션)이 생기는데, 
	이를 지우고 다시 하나의 파티션으로 초기화 하고 싶다면 다음과 같이 한다

	1. 인터넷 검색창에 윈도우 명령어 'diskpart' 초기화를 검색
	2. 초기화 후 내컴퓨터 > 우측마우스 선택 > 관리 > 컴퓨터관리 > 저장소 > 디스크 관리 실행
	3. 해당 USB 디스크 선택 후 > 새 단순 볼륨 선택해서 다시 파일시스템등을 설정 초기화

3. 내 컴 BIOS 모드 확인 
	시작 >  cmd > msinfo32 : 실행하면 창이 뜨고 잘 찾아보면	 'BIOS 모드' 라는 게 있는데,
	 거기에 'UEFI' ,'Lagacy' 등으로 나온다. 
	Lagacy 가 구형 BIOS 형식이다

4. 파티션 종류 확인
	방식 1:  시작 > cmd > 관리자로 실행 > 
		diskpart 엔터
		list disk 엔터

		Gpt 아래에 '*' 표시가 있다면 GPT파티션, 없으면 MBR 파티션
	
	방식 2: 내컴퓨터 > 우측마우스 속성 > 관리 > 컴퓨터 관리 > 컴퓨터 관리(로컬) > 저장소 > 디스크 관리 
		
		해당 디스크를 누르고 우측 마우스 클릭(파티션이 아니고) > 속성 > 속성창 탭 중 볼륨 > 
		파티션 형식을 보면 나온다

PS : 첨엔 '초기화 시스템' 별로 인식하는 디스크 파티션이 딱 정해져 있고, 운영체제를 각 파티션별로 설치하면, 
해당 파티션으로 설치된 시스템은 그와 같은 파티션만 인식하는 줄 알았다.
운영체제가(Windows 10)  설치되고 예를 들어 
	
	UEFI + GPT 파티션으로 설치된 운영체제 => 특정 USB가 파티션이 MBR or GPT 로 되어 있다면?
	BIOS + MBR 파티션으로 설치된 운영체제 => 특정 USB가 파티션이 MBR or GPT 로 되어 있다면?

등의 궁금증이 생겼는데 내가 어디서 가져온게 USB가 GPT 파티션으로 잡혀있다고 가정하면,
그럼 BIOS + MBR 파티션으로 설치된 운영체제는 그걸 인식 못하는 건가? 하고 착각했다.

그러지 않더라..
아마 구 운영체제는 저 GPT 파티션을 인식 못 할 수도 있지 않을까? 라는 의구심을 잠깐 했지만, 이 내용은 또 검색해 봐야한다.

일단
내가 가지고 있는 컴으로 실험한 결과는

	Window 7  + MBR 파티션 : GPT 파티션 USB 인식됨
	Window 10 + GPT 파티션 : GPT 파티션 USB 인식됨

	Window 7  + MBR 파티션 : MBR 파티션 USB 인식됨
	Window 10 + GPT 파티션 : MBR 파티션 USB 인식됨

고로 운영체제로 넘어오면 인식 안 될까봐 걱정을 덜 해도 되는 것같다..

문제의 키워드는 '초기화 시스템' 별로 '부팅시 인식 가능 디스크 파티션' 일 것이다.

몇번 문서를 수정하고 착각한 부분 보안해서 다시 작성했는데, 또 생길지도 모른다...
